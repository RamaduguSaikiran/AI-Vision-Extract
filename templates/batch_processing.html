{% extends "base.html" %}
{% block content %}

<div class="animate-fadeSlideIn">

    <!-- HEADER -->
    <section class="mb-10">
        <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight 
            bg-gradient-to-r from-fuchsia-300 via-purple-400 to-sky-300
            bg-clip-text text-transparent drop-shadow-[0_0_20px_rgba(168,85,247,0.45)]">
            Batch Processing
        </h1>

        <p class="text-slate-300 text-sm md:text-base max-w-2xl mt-3 opacity-90 leading-relaxed">
            Upload multiple images and our AI will remove their backgrounds with cinematic precision.
        </p>
    </section>


    <!-- UPLOAD PANEL -->
    <div class="ai-panel-cinematic p-[2px] rounded-[1.8rem]">
        <div class="ai-panel-inner px-6 py-7 md:px-10 md:py-10 space-y-8">

            <form method="post" enctype="multipart/form-data" class="space-y-8">

                <!-- Multiple Upload -->
                <div class="flex flex-col gap-3">
                    <label class="text-xs uppercase tracking-wide text-slate-300/80">
                        Upload Images (Multiple)
                    </label>

                    <input type="file"
                        name="images"
                        accept="image/*"
                        multiple
                        required
                        class="block w-full text-xs text-slate-300 file:mr-3
                            file:bg-gradient-to-r file:from-purple-500 file:to-sky-500
                            file:text-white file:font-semibold file:px-3 file:py-2
                            file:rounded-xl hover:file:scale-[1.03]
                            transition-all duration-200 cursor-pointer
                            bg-slate-900/70 border border-slate-700 rounded-xl px-3 py-3
                            hover:bg-slate-900/80 backdrop-blur-xl"
                    />
                </div>

                <!-- Button -->
                <div class="pt-3">
                    <button type="submit" class="ai-btn-holo" data-magnetic="true">
                        ðŸš€ Process Images
                    </button>
                </div>

            </form>

        </div>
    </div>


    <!-- RESULTS -->
    {% if outputs %}
    <section class="mt-16 space-y-10">

        <h2 class="text-xl md:text-2xl font-semibold 
            text-sky-300 drop-shadow-[0_0_20px_rgba(56,189,248,0.45)]
            border-l-4 border-sky-400 pl-4">
            Processed Results
        </h2>

        <!-- UNIFORM CINEMATIC GRID -->
        <div class="grid gap-10 sm:grid-cols-2 md:grid-cols-3">

            {% for item in outputs %}
            <div class="flex flex-col gap-3">

                <!-- Filename -->
               

                <!-- CINEMATIC CARD: CONSTANT SIZE -->
                <div class="relative p-[6px] rounded-3xl
                    bg-gradient-to-b from-sky-900/40 via-purple-900/30 to-slate-900/70
                    border border-slate-700/70
                    shadow-[0_20px_50px_rgba(0,0,0,0.8)]
                    hover:scale-[1.015] hover:shadow-[0_25px_55px_rgba(0,0,0,0.9)]
                    transition-all duration-300">

                    <!-- FIXED FRAME SIZE -->
                    <div class="w-full h-[260px] rounded-2xl overflow-hidden bg-black/10">
                        <img src="data:image/png;base64,{{ item.b64 }}"
                            class="w-full h-full object-contain rounded-2xl">
                    </div>

                </div>
            </div>
            {% endfor %}

        </div>

        <!-- ZIP DOWNLOAD -->
        <div class="pt-6">
            <a href="{{ url_for('download_zip') }}"
                class="ai-btn-secondary ai-btn-glow text-xs px-4 py-2 inline-flex"
                data-magnetic="true">
                â¬‡ Download All as ZIP
            </a>
        </div>

    </section>
    {% endif %}

</div>

{% endblock %}
